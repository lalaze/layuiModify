/** layui-v2.5.5 MIT License By https://www.layui.com */
 ;"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"===_typeof(Symbol.iterator)?function(e){function i(i){return e.apply(this,arguments)}return i.toString=function(){return e.toString()},i}(function(e){return"undefined"==typeof e?"undefined":_typeof(e)}):function(e){function i(i){return e.apply(this,arguments)}return i.toString=function(){return e.toString()},i}(function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":"undefined"==typeof e?"undefined":_typeof(e)}))(e)}layui.define("form",function(e){var i=layui.$,n=layui.form,t=layui.layer,a="tree",r={config:{},index:layui[a]?layui[a].index+1e4:0,set:function(e){var n=this;return n.config=i.extend({},n.config,e),n},on:function(e,i){return layui.onevent.call(this,a,e,i)}},l=function g(){var e=this,i=e.config,n=i.id||e.index;return g.that[n]=e,g.config[n]=i,{config:i,reload:function(i){e.reload.call(e,i)},getChecked:function(){return e.getChecked.call(e)},setChecked:function(i){return e.setChecked.call(e,i)}}},c="layui-hide",d="layui-disabled",o="layui-tree-set",s="layui-tree-iconClick",u="layui-icon-addition",h="layui-icon-subtraction",f="layui-tree-entry",p="layui-tree-main",y="layui-tree-txt",v="layui-tree-pack",C="layui-tree-spread",m="layui-tree-setLineShort",k="layui-tree-showLine",x="layui-tree-lineExtend",b=function(e){var n=this;n.index=++r.index,n.config=i.extend({},n.config,r.config,e),n.render()};b.prototype.config={data:[],showCheckbox:!1,showLine:!0,accordion:!1,onlyIconControl:!1,isJump:!1,edit:!1,text:{defaultNodeName:"未命名",none:"无数据"}},b.prototype.reload=function(e){var n=this;layui.each(e,function(e,i){i.constructor===Array&&delete n.config[e]}),n.config=i.extend(!0,{},n.config,e),n.render()},b.prototype.render=function(){var e=this,n=e.config;e.checkids=[];var t=i('<div class="layui-tree'+(n.showCheckbox?" layui-form":"")+(n.showLine?" layui-tree-line":"")+'" lay-filter="LAY-tree-'+e.index+'"></div>');e.tree(t);var a=n.elem=i(n.elem);if(a[0]){if(e.key=n.id||e.index,e.elem=t,e.elemNone=i('<div class="layui-tree-emptyText">'+n.text.none+"</div>"),a.html(e.elem),0==e.elem.find(".layui-tree-set").length)return e.elem.append(e.elemNone);n.showCheckbox&&e.renderForm("checkbox"),e.elem.find(".layui-tree-set").each(function(){var e=i(this);e.parent(".layui-tree-pack")[0]||e.addClass("layui-tree-setHide"),!e.next()[0]&&e.parents(".layui-tree-pack").eq(1).hasClass("layui-tree-lineExtend")&&e.addClass(m),e.next()[0]||e.parents(".layui-tree-set").eq(0).next()[0]||e.addClass(m)}),e.events()}},b.prototype.renderForm=function(e){n.render(e,"LAY-tree-"+this.index)},b.prototype.tree=function(e,n){var t=this,a=t.config,r=n||a.data;layui.each(r,function(n,r){var l=r.children&&r.children.length>0,s=i('<div class="layui-tree-pack" '+(r.spread?'style="display: block;"':"")+'"></div>'),u=i(['<div data-id="'+r.id+'" class="layui-tree-set'+(r.spread?" layui-tree-spread":"")+(r.checked?" layui-tree-checkedFirst":"")+'">','<div class="layui-tree-entry">','<div class="layui-tree-main">',function(){return a.showLine?l?'<span class="layui-tree-iconClick layui-tree-icon"><i class="layui-icon '+(r.spread?"layui-icon-subtraction":"layui-icon-addition")+'"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-icon layui-icon-file"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-tree-iconArrow '+(l?"":c)+'"></i></span>'}(),function(){return a.showCheckbox?'<input type="checkbox" name="'+(r.field||"layuiTreeCheck_"+r.id)+'" same="layuiTreeCheck" lay-skin="primary" '+(r.disabled?"disabled":"")+' value="'+r.id+'">':""}(),function(){return a.isJump&&r.href?'<a href="'+r.href+'" target="_blank" class="'+y+'">'+(r.title||r.label||a.text.defaultNodeName)+"</a>":'<span class="'+y+(r.disabled?" "+d:"")+'">'+(r.title||r.label||a.text.defaultNodeName)+"</span>"}(),"</div>",function(){if(!a.edit)return"";var e={add:'<i class="layui-icon layui-icon-add-1"  data-type="add"></i>',update:'<i class="layui-icon layui-icon-edit" data-type="update"></i>',del:'<i class="layui-icon layui-icon-delete" data-type="del"></i>'},i=['<div class="layui-btn-group layui-tree-btnGroup">'];return a.edit===!0&&(a.edit=["update","del"]),"object"===_typeof(a.edit)?(layui.each(a.edit,function(n,t){i.push(e[t]||"")}),i.join("")+"</div>"):void 0}(),"</div></div>"].join(""));l&&(u.append(s),t.tree(s,r.children)),e.append(u),u.prev("."+o)[0]&&u.prev().children(".layui-tree-pack").addClass("layui-tree-showLine"),l||u.parent(".layui-tree-pack").addClass("layui-tree-lineExtend"),t.spread(u,r),a.showCheckbox&&(r.checked&&t.checkids.push(r.id),t.checkClick(u,r)),a.edit&&t.operate(u,r)})},b.prototype.spread=function(e,n){var t=this,a=t.config,r=e.children("."+f),l=r.children("."+p),c=r.find("."+s),m=r.find("."+y),k=a.onlyIconControl?c:l,x="";k.on("click",function(i){var n=e.children("."+v),t=k.children(".layui-icon")[0]?k.children(".layui-icon"):k.find(".layui-tree-icon").children(".layui-icon");if(n[0]){if(e.hasClass(C))e.removeClass(C),n.slideUp(200),t.removeClass(h).addClass(u);else if(e.addClass(C),n.slideDown(200),t.addClass(h).removeClass(u),a.accordion){var r=e.siblings("."+o);r.removeClass(C),r.children("."+v).slideUp(200),r.find(".layui-tree-icon").children(".layui-icon").removeClass(h).addClass(u)}}else x="normal"}),m.on("click",function(){var t=i(this);t.hasClass(d)||(x=e.hasClass(C)?a.onlyIconControl?"open":"close":a.onlyIconControl?"close":"open",a.click&&a.click({elem:e,state:x,data:n}))})},b.prototype.setCheckbox=function(e,i,n){var t=this,a=(t.config,n.prop("checked"));if(!n.prop("disabled")){if("object"===_typeof(i.children)||e.find("."+v)[0]){var r=e.find("."+v).find('input[same="layuiTreeCheck"]');r.each(function(){this.disabled||(this.checked=a)})}var l=function c(e){if(e.parents("."+o)[0]){var i,n=e.parent("."+v),t=n.parent(),r=n.prev().find('input[same="layuiTreeCheck"]');a?r.prop("checked",a):(n.find('input[same="layuiTreeCheck"]').each(function(){this.checked&&(i=!0)}),i||r.prop("checked",!1)),c(t)}};l(e),t.renderForm("checkbox")}},b.prototype.checkClick=function(e,n){var t=this,a=t.config,r=e.children("."+f),l=r.children("."+p);l.on("click",'input[same="layuiTreeCheck"]+',function(r){layui.stope(r);var l=i(this).prev(),c=l.prop("checked");l.prop("disabled")||(t.setCheckbox(e,n,l),a.oncheck&&a.oncheck({elem:e,checked:c,data:n}))})},b.prototype.operate=function(e,n){var a=this,r=a.config,l=e.children("."+f),d=l.children("."+p);l.children(".layui-tree-btnGroup").on("click",".layui-icon",function(l){layui.stope(l);var p=i(this).data("type"),b=e.children("."+v),g={data:n,type:p,elem:e};if("add"==p){b[0]||(r.showLine?(d.find("."+s).addClass("layui-tree-icon"),d.find("."+s).children(".layui-icon").addClass(u).removeClass("layui-icon-file")):d.find(".layui-tree-iconArrow").removeClass(c),e.append('<div class="layui-tree-pack"></div>'));var w=r.operate&&r.operate(g),N={};if(N.title=r.text.defaultNodeName,N.id=w,a.tree(e.children("."+v),[N]),r.showLine)if(b[0])b.hasClass(x)||b.addClass(x),e.find("."+v).each(function(){i(this).children("."+o).last().addClass(m)}),b.children("."+o).last().prev().hasClass(m)?b.children("."+o).last().prev().removeClass(m):b.children("."+o).last().removeClass(m),!e.parent("."+v)[0]&&e.next()[0]&&b.children("."+o).last().removeClass(m);else{var S=e.siblings("."+o),T=1,L=e.parent("."+v);layui.each(S,function(e,n){i(n).children("."+v)[0]||(T=0)}),1==T?(S.children("."+v).addClass(k),S.children("."+v).children("."+o).removeClass(m),e.children("."+v).addClass(k),L.removeClass(x),L.children("."+o).last().children("."+v).children("."+o).last().addClass(m)):e.children("."+v).children("."+o).addClass(m)}if(!r.showCheckbox)return;if(d.find('input[same="layuiTreeCheck"]')[0].checked){var _=e.children("."+v).children("."+o).last();_.find('input[same="layuiTreeCheck"]')[0].checked=!0}a.renderForm("checkbox")}else if("update"==p){var A=d.children("."+y).html();d.children("."+y).html(""),d.append('<input type="text" class="layui-tree-editInput">'),d.children(".layui-tree-editInput").val(A).focus();var I=function(e){var i=e.val().trim();i=i?i:r.text.defaultNodeName,e.remove(),d.children("."+y).html(i),g.data.title=i,r.operate&&r.operate(g)};d.children(".layui-tree-editInput").blur(function(){I(i(this))}),d.children(".layui-tree-editInput").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),I(i(this)))})}else t.confirm('确认删除该节点 "<span style="color: #999;">'+(n.title||"")+'</span>" 吗？',function(n){if(r.operate&&r.operate(g),g.status="remove",t.close(n),!e.prev("."+o)[0]&&!e.next("."+o)[0]&&!e.parent("."+v)[0])return e.remove(),void a.elem.append(a.elemNone);if(e.siblings("."+o).children("."+f)[0]){if(r.showCheckbox){var l=function N(e){if(e.parents("."+o)[0]){var n=e.siblings("."+o).children("."+f),t=e.parent("."+v).prev(),r=t.find('input[same="layuiTreeCheck"]')[0],l=1,c=0;0==r.checked&&(n.each(function(e,n){var t=i(n).find('input[same="layuiTreeCheck"]')[0];0!=t.checked||t.disabled||(l=0),t.disabled||(c=1)}),1==l&&1==c&&(r.checked=!0,a.renderForm("checkbox"),N(t.parent("."+o))))}};l(e)}if(r.showLine){var d=e.siblings("."+o),u=1,p=e.parent("."+v);layui.each(d,function(e,n){i(n).children("."+v)[0]||(u=0)}),1==u?(b[0]||(p.removeClass(x),d.children("."+v).addClass(k),d.children("."+v).children("."+o).removeClass(m)),e.next()[0]?p.children("."+o).last().children("."+v).children("."+o).last().addClass(m):e.prev().children("."+v).children("."+o).last().addClass(m),e.next()[0]||e.parents("."+o)[1]||e.parents("."+o).eq(0).next()[0]||e.prev("."+o).addClass(m)):!e.next()[0]&&e.hasClass(m)&&e.prev().addClass(m)}}else{var y=e.parent("."+v).prev();if(r.showLine){y.find("."+s).removeClass("layui-tree-icon"),y.find("."+s).children(".layui-icon").removeClass(h).addClass("layui-icon-file");var w=y.parents("."+v).eq(0);w.addClass(x),w.children("."+o).each(function(){i(this).children("."+v).children("."+o).last().addClass(m)})}else y.find(".layui-tree-iconArrow").addClass(c);e.parents("."+o).eq(0).removeClass(C),e.parent("."+v).remove()}e.remove()})})},b.prototype.events=function(){var e=this,n=e.config;e.elem.find(".layui-tree-checkedFirst");e.setChecked(e.checkids),e.elem.find(".layui-tree-search").on("keyup",function(){var t=i(this),a=t.val(),r=t.nextAll(),l=[];r.find("."+y).each(function(){var e=i(this).parents("."+f);if(i(this).html().indexOf(a)!=-1){l.push(i(this).parent());var n=function t(e){e.addClass("layui-tree-searchShow"),e.parent("."+v)[0]&&t(e.parent("."+v).parent("."+o))};n(e.parent("."+o))}}),r.find("."+f).each(function(){var e=i(this).parent("."+o);e.hasClass("layui-tree-searchShow")||e.addClass(c)}),0==r.find(".layui-tree-searchShow").length&&e.elem.append(e.elemNone),n.onsearch&&n.onsearch({elem:l})}),e.elem.find(".layui-tree-search").on("keydown",function(){i(this).nextAll().find("."+f).each(function(){var e=i(this).parent("."+o);e.removeClass("layui-tree-searchShow "+c)}),i(".layui-tree-emptyText")[0]&&i(".layui-tree-emptyText").remove()})},b.prototype.getChecked=function(){var e=this,n=e.config,t=[],a=[];e.elem.find(".layui-form-checked").each(function(){t.push(i(this).prev()[0].value)});var r=function l(e,n){layui.each(e,function(e,a){layui.each(t,function(e,t){if(a.id==t){var r=i.extend({},a);return delete r.children,n.push(r),a.children&&(r.children=[],l(a.children,r.children)),!0}})})};return r(i.extend({},n.data),a),a},b.prototype.setChecked=function(e){var n=this;n.config;n.elem.find("."+o).each(function(n,t){var a=i(this).data("id"),r=i(t).children("."+f).find('input[same="layuiTreeCheck"]'),l=r.next();if("number"==typeof e){if(a==e)return r[0].checked||l.click(),!1}else"object"===("undefined"==typeof e?"undefined":_typeof(e))&&layui.each(e,function(e,i){if(i==a&&!r[0].checked)return l.click(),!0})})},l.that={},l.config={},r.reload=function(e,i){var n=l.that[e];return n.reload(i),l.call(n)},r.getChecked=function(e){var i=l.that[e];return i.getChecked()},r.setChecked=function(e,i){var n=l.that[e];return n.setChecked(i)},r.render=function(e){var i=new b(e);return l.call(i)},e(a,r)});